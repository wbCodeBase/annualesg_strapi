import{u as y,a as m,ag as M,b as k,aS as v,j as e,bp as a,T as c,e as B,g as E,bl as C,a3 as L,I as A,ba as I,bm as U,ad as N,k as F,ac as P}from"./strapi-m_OSimzn.js";import{R as f}from"./RelativeTime-7M-sOFIm.js";const Q=({permissions:n,headers:s=[],isLoading:o=!1,tokens:r=[],onConfirmDelete:i,tokenType:l})=>{const[{query:d}]=y(),{formatMessage:D,locale:T}=m(),[,b]=d&&d.sort?d.sort.split(":"):[void 0,"ASC"],R=M(),{trackUsage:S}=k(),x=v(T),g=[...r].sort((t,h)=>b==="DESC"?x.compare(h.name,t.name):x.compare(t.name,h.name)),{canDelete:u,canUpdate:j,canRead:p}=n,w=t=>()=>{p&&(S("willEditTokenFromList",{tokenType:l}),R(t.toString()))};return e.jsx(a.Root,{headers:s,rows:g,isLoading:o,children:e.jsxs(a.Content,{children:[e.jsx(a.Head,{children:s.map(t=>e.jsx(a.HeaderCell,{...t},t.name))}),e.jsx(a.Empty,{}),e.jsx(a.Loading,{}),e.jsx(a.Body,{children:g.map(t=>e.jsxs(a.Row,{onClick:w(t.id),children:[e.jsx(a.Cell,{maxWidth:"25rem",children:e.jsx(c,{textColor:"neutral800",fontWeight:"bold",ellipsis:!0,children:t.name})}),e.jsx(a.Cell,{maxWidth:"25rem",children:e.jsx(c,{textColor:"neutral800",ellipsis:!0,children:t.description})}),e.jsx(a.Cell,{children:e.jsx(c,{textColor:"neutral800",children:e.jsx(f,{timestamp:new Date(t.createdAt)})})}),e.jsx(a.Cell,{children:t.lastUsedAt&&e.jsx(c,{textColor:"neutral800",children:e.jsx(f,{timestamp:new Date(t.lastUsedAt),customIntervals:[{unit:"hours",threshold:1,text:D({id:"Settings.apiTokens.lastHour",defaultMessage:"last hour"})}]})})}),j||p||u?e.jsx(a.Cell,{children:e.jsxs(B,{justifyContent:"end",children:[j&&e.jsx(z,{tokenName:t.name,tokenId:t.id}),u&&e.jsx(q,{tokenName:t.name,onClickDelete:()=>i?.(t.id),tokenType:l})]})}):null]},t.id))})]})})},$={edit:{id:"app.component.table.edit",defaultMessage:"Edit {target}"},read:{id:"app.component.table.read",defaultMessage:"Read {target}"}},H=({tokenName:n,tokenId:s,buttonType:o="edit",children:r})=>{const{formatMessage:i}=m();return e.jsx(W,{tag:N,to:s.toString(),onClick:l=>l.stopPropagation(),title:i($[o],{target:n}),variant:"ghost",size:"S",children:r})},W=F(P)`
  padding: 0.7rem;

  & > span {
    display: flex;
  }
`,q=({tokenName:n,onClickDelete:s,tokenType:o})=>{const{formatMessage:r}=m(),{trackUsage:i}=k(),l=()=>{i("willDeleteToken",{tokenType:o}),s()};return e.jsx(C.Root,{children:e.jsxs(L,{paddingLeft:1,onClick:d=>d.stopPropagation(),children:[e.jsx(C.Trigger,{children:e.jsx(A,{label:r({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${n}`}),name:"delete",variant:"ghost",children:e.jsx(I,{})})}),e.jsx(U,{onConfirm:l})]})})},z=({tokenName:n,tokenId:s})=>e.jsx(H,{tokenName:n,tokenId:s,children:e.jsx(E,{})});export{Q as T};
